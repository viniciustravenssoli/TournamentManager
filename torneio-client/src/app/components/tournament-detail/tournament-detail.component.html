<div class="container mt-4 mb-4">
  <h2>{{ tournament?.TournamentName }} - Details</h2>

  <h3>Participants</h3>
  <ul class="list-group mb-4">
    <li *ngFor="let participant of tournament?.participants" class="list-group-item">
      {{ participant.name }}
    </li>
  </ul>

  <h3>Matches</h3>
  <div *ngFor="let round of matchesGroupedByRound | keyvalue">
    <h4 class="my-3">Round {{ round.key }}</h4>
    <table class="table table-striped table-hover rounded">
      <thead class="thead-dark">
        <tr>
          <th>Match</th>
          <th>Winner</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let match of round.value">
          <td>{{ match.participant1Name }} vs {{ match.participant2Name }}</td>
          <td>{{ match.winnerName }}</td>
          <td *ngIf="!match.winnerName">
            <form (submit)="setWinner(match.matchId, selectedWinnerId)" class="select-winner">
              <label for="winnerId-{{match.matchId}}">Select Winner:</label>
              <select id="winnerId-{{match.matchId}}" [(ngModel)]="selectedWinnerId" name="winnerId" class="form-control">
                <option [value]="match.participant1Id">{{ match.participant1Name }}</option>
                <option [value]="match.participant2Id">{{ match.participant2Name }}</option>
              </select>
              <button type="submit" class="btn btn-primary">Set Winner</button>
            </form>
          </td>
          <td *ngIf="match.winnerName">
            <span>Winner: {{ match.winnerName }}</span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <a routerLink="/" class="btn btn-secondary mt-3">Back to List</a>
</div>
